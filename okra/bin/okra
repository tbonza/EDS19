#! /usr/bin/env python

import argparse
import logging

from okra.logging_utils import enable_log
from okra.playbook import load_playbook, parse_playbook

logger = logging.getLogger(__name__)

parser = argparse.ArgumentParser()
parser.add_argument("playbook", help="filepath to yaml playbook")
parser.add_argument("--logfile", help="filepath to log file")

args = parser.parse_args()

if args.logfile:
    enable_log(args.logfile)

if args.playbook:
    logger.info("STARTED okra process")
    playbook = load_playbook(args.playbook)
    parse_playbook(playbook)
    logger.info("FINISHED okra process")

else:
    parser.print_help()
    
